<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CHR Archive</title>
  <link href="https://fonts.googleapis.com/css2?family=Yu+Gothic+Light&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Yu Gothic Light', sans-serif;
      background-color: black;
      color: white;
      overflow-x: hidden;
    }

    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeIn 1.2s ease forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    header {
      text-align: center;
      font-size: 2rem;
      padding: 1rem;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 3rem;
      margin-top: 1rem;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-size: 1.1rem;
      transition: opacity 0.3s;
      cursor: pointer;
    }

    nav a:hover {
      opacity: 0.7;
    }

    .section {
      padding: 2rem;
      display: none;
    }

    .section.active {
      display: block;
    }

    .gallery {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
      margin-top: 2rem;
    }

    .gallery img {
      width: 35%;
      height: auto;
      display: block;
      border-radius: 0;
      cursor: pointer;
      border-bottom: 1px solid #ccc;
      padding-bottom: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .video-wrapper {
      width: 35%;
      margin: 0 auto;
      position: relative;
      border-radius: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      aspect-ratio: 4 / 3;
      overflow: hidden;
      background-color: black;
    }

    .video-wrapper iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 0;
    }

    .fragment-piece {
      margin-bottom: 2rem;
      border-bottom: 1px solid #444;
      padding-bottom: 1rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      font-size: 1.1rem;
      line-height: 1.5;
    }

    /* Vault tee image with coming soon overlay */
    #vault .tee-container {
      position: relative;
      width: 35%;
      max-width: 400px;
      margin: 0 auto;
    }

    #vault .tee-container img {
      width: 100%;
      border-radius: 8px;
      cursor: zoom-in;
      display: block;
    }

    #vault .tee-container .overlay-text {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      font-family: 'Yu Gothic Light', sans-serif;
      font-size: 1.5rem;
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
      border-radius: 8px;
      user-select: none;
    }

    #enter-overlay {
      position: fixed;
      z-index: 999;
      background-color: black;
      color: white;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 1s ease;
    }

    #enter-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    #enter-button {
      font-size: 2rem;
      border: none;
      background: none;
      color: white;
      font-family: 'Yu Gothic Light', sans-serif;
      cursor: pointer;
      text-transform: lowercase;
    }

    audio {
      display: none;
    }

    /* Modal overlay for fullscreen image */
    #modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      cursor: zoom-out;
    }

    #modal-overlay img {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 8px;
      cursor: default;
    }

    /* MOBILE RESPONSIVE TWEAKS */
    @media (max-width: 600px) {
      header {
        font-size: 1.5rem;
        padding: 0.5rem 1rem;
      }

      nav {
        flex-direction: column;
        gap: 1.5rem;
      }

      nav a {
        font-size: 1rem;
      }

      .gallery img,
      .video-wrapper,
      #vault .tee-container {
        width: 90% !important;
        max-width: none;
      }

      .fragment-piece {
        max-width: 90%;
        font-size: 1rem;
      }

      .fragment-piece p {
        line-height: 1.4;
      }

      /* Reduce padding for sections */
      .section {
        padding: 1rem;
      }

      /* Adjust spacing between elements */
      .gallery {
        gap: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="enter-overlay">
    <button id="enter-button">enter</button>
  </div>

  <audio id="bg-music" src="ambient.mp3"></audio>

  <header>chr archive</header>
  <nav>
    <a onclick="showSection('archive')">archive</a>
    <a onclick="showSection('fragments')">fragments</a>
    <a onclick="showSection('vault')">vault</a>
  </nav>

  <div id="archive" class="section active fade-in">
    <div class="gallery">
      <!-- Images -->
      <img src="images/image1.jpg" alt="Image 1" />
      <img src="images/image2.jpg" alt="Image 2" />
      <img src="images/image3.jpg" alt="Image 3" />
      <img src="images/dream.jpg" alt="dream" />
      <img src="images/thecity.jpg" alt="thecity" />
      <img src="images/together.jpg" alt="together" />
      <img src="images/trek.jpg" alt="trek" />
      <img src="images/rays.jpg" alt="rays" />
      <img src="images/lastphonecall.jpg" alt="lastphonecall" />
      <img src="images/friend.jpg" alt="friend" />
      <img src="images/fortune.jpg" alt="fortune" />
      <img src="images/ballon.jpg" alt="ballon" />
      <img src="images/gate.jpg" alt="gate" />
      <img src="images/blur.jpg" alt="blur" />

      <!-- Videos as YouTube embeds -->
      <div class="video-wrapper">
        <iframe src="https://www.youtube.com/embed/ipE3tAkZtbk?enablejsapi=1&rel=0&showinfo=0" allow="autoplay; encrypted-media" allowfullscreen title="FINALLY"></iframe>
      </div>
      <div class="video-wrapper">
        <iframe src="https://www.youtube.com/embed/km1l2FEP_3E?enablejsapi=1&rel=0&showinfo=0" allow="autoplay; encrypted-media" allowfullscreen title="new"></iframe>
      </div>
      <div class="video-wrapper">
        <iframe src="https://www.youtube.com/embed/4nPtfaONCEA?enablejsapi=1&rel=0&showinfo=0" allow="autoplay; encrypted-media" allowfullscreen title="mymessage"></iframe>
      </div>
      <div class="video-wrapper">
        <iframe src="https://www.youtube.com/embed/u64c-FpTVq0?enablejsapi=1&rel=0&showinfo=0" allow="autoplay; encrypted-media" allowfullscreen title="everybodyasked"></iframe>
      </div>
    </div>
  </div>

  <div id="fragments" class="section fade-in">
    <div class="gallery">
      <div class="fragment-piece">
        <p>“I still remember the sound of that morning wind, and how it felt like something old was leaving.”</p>
      </div>
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <img src="images/sadness.jpg" alt="sadness" />
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <img src="images/sigil.jpg" alt="sigil" />
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <div class="fragment-piece">
        <p>“in the past, if i was ever asked to give advice on life, i’d say:

“don’t let anyone make you forget who you are.”

but today, i’ve realized—
i wouldn’t be who i am now if i hadn’t forgotten who i was.

maybe the advice now is:
“to truly become, you have to forget but don’t be afraid to forget.”

i don’t miss the past versions of me.
i mourn them.
i see them.
i thank them.
but i’m glad they’re gone.
i’m glad i’m here instead.

keep growing. i love you.
”</p>
      </div>
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <img src="images/waiting.jpg" alt="waiting" />
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <img src="images/float.jpg" alt="float" />
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <img src="images/haveeverything.jpg" alt="haveeverything" />
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <img src="images/nowill.jpg" alt="nowill" />
      <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;" />

      <div class="fragment-piece">
        <p>“half of your suffering comes from trying to understand learn to be and you'll be free.”</p>
      </div>
    </div>
  </div>

  <div id="vault" class="section fade-in">
    <div class="tee-container">
      <img id="tee-image" src="images/teesample.png" alt="Tee Sample" />
      <div class="overlay-text">coming soon</div>
    </div>
  </div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    const enterBtn = document.getElementById('enter-button');
    const overlay = document.getElementById('enter-overlay');
    const audio = document.getElementById('bg-music');

    enterBtn.addEventListener('click', () => {
      overlay.classList.add('hidden');
      setTimeout(() => {
        overlay.style.display = 'none';
      }, 1000);

      audio.volume = 0;  // start silent
      setTimeout(() => {
        audio.currentTime = 15;
        audio.play();

        let vol = 0;
        const fadeInterval = setInterval(() => {
          if (vol < 1) {
            vol += 0.02; // increase volume gradually
            if (vol > 1) vol = 1;
            audio.volume = vol;
          } else {
            clearInterval(fadeInterval);
          }
        }, 100); // every 100ms
      }, 600);
    });

    function showSection(id) {
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(id).classList.add('active');
    }

    // Fullscreen modal for archive gallery images
    const galleryImages = document.querySelectorAll('#archive .gallery img');
    galleryImages.forEach(img => {
      img.addEventListener('click', () => {
        const modal = document.createElement('div');
        modal.id = 'modal-overlay';

        const modalImg = document.createElement('img');
        modalImg.src = img.src;
        modalImg.alt = img.alt;

        modal.appendChild(modalImg);
        document.body.appendChild(modal);

        modal.addEventListener('click', () => {
          document.body.removeChild(modal);
        });
      });
    });

    // Fullscreen modal for fragments images (any img inside #fragments)
    const fragmentsImages = document.querySelectorAll('#fragments img');
    fragmentsImages.forEach(img => {
      img.addEventListener('click', () => {
        const modal = document.createElement('div');
        modal.id = 'modal-overlay';

        const modalImg = document.createElement('img');
        modalImg.src = img.src;
        modalImg.alt = img.alt;

        modal.appendChild(modalImg);
        document.body.appendChild(modal);

        modal.addEventListener('click', () => {
          document.body.removeChild(modal);
        });
      });
    });

    // Fullscreen on click for tee image
    const teeImage = document.getElementById('tee-image');
    teeImage.addEventListener('click', () => {
      const modal = document.createElement('div');
      modal.id = 'modal-overlay';

      const modalImg = document.createElement('img');
      modalImg.src = teeImage.src;
      modalImg.alt = teeImage.alt;

      modal.appendChild(modalImg);
      document.body.appendChild(modal);

      modal.addEventListener('click', () => {
        document.body.removeChild(modal);
      });
    });

    // YouTube Iframe API code to pause/mute bg music when videos play
    let players = [];
    function onYouTubeIframeAPIReady() {
      const iframes = document.querySelectorAll('#archive iframe');
      iframes.forEach((iframe, index) => {
        players[index] = new YT.Player(iframe, {
          events: {
            'onStateChange': onPlayerStateChange
          }
        });
      });
    }

    function onPlayerStateChange(event) {
      // YT.PlayerState.PLAYING === 1, PAUSED === 2, ENDED === 0
      if (event.data === YT.PlayerState.PLAYING) {
        // Lower or mute bg music volume when video plays
        fadeAudioVolume(audio, 1, 0, 200);
      } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
        // Restore bg music volume when video pauses or ends
        fadeAudioVolume(audio, audio.volume, 1, 400);
      }
    }

    function fadeAudioVolume(audioEl, fromVol, toVol, duration) {
      const stepTime = 50;
      const steps = duration / stepTime;
      let currentStep = 0;
      const volStep = (toVol - fromVol) / steps;

      clearInterval(audioEl._fadeInterval);
      audioEl._fadeInterval = setInterval(() => {
        currentStep++;
        let newVol = fromVol + volStep * currentStep;
        if (newVol < 0) newVol = 0;
        if (newVol > 1) newVol = 1;
        audioEl.volume = newVol;

        if (currentStep >= steps) {
          clearInterval(audioEl._fadeInterval);
        }
      }, stepTime);
    }
  </script>
</body>
</html>
